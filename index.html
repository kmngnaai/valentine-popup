<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Valentine Night Pink</title>

<style>
body{
    margin:0;
    min-height:100vh;
    background:url("valentines-mobile.png") center/cover no-repeat #f6d6df;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:"Segoe UI","Helvetica Neue",Arial,sans-serif;
    overflow:hidden;
}

body::before{
    content:"";
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.22);
    z-index:0;
}

/* ================= STICKER ================= */
.sticker{
    position:fixed;
    z-index:1;
    opacity:0;
    cursor:pointer;
    animation:life 3.5s ease-in-out forwards;
}

@keyframes life{
    0%{opacity:0; transform:scale(.9);}
    21%{opacity:.9; transform:scale(1);}     /* 0.75s */
    78%{opacity:.9;}                        /* giá»¯ 2s */
    100%{opacity:0; transform:scale(.95);}  /* 0.75s */
}

/* Panda glow */
.panda{
    animation:
        life 3.5s ease-in-out forwards,
        pandaGlow 2s ease-in-out infinite alternate;
}

@keyframes pandaGlow{
    from{filter:drop-shadow(0 0 6px rgba(255,255,255,0.7));}
    to{filter:drop-shadow(0 0 18px rgba(255,182,193,1));}
}

.panda:active{
    transform:scale(.85);
}

/* ================= POPUP ================= */
.pink-box{
    position:relative;
    z-index:2;
    width:min(92vw,460px);
    padding:30px 26px 34px;
    background:linear-gradient(180deg,#fff9fc,#fff2f7);
    border-radius:26px;
    border:2px solid #f0b7d3;
    box-shadow:
        0 14px 36px rgba(0,0,0,.28),
        0 0 0 6px rgba(255,255,255,.45);
    text-align:center;
}

.heart{
    font-size:46px;
    margin-bottom:10px;
    animation:beat 2.2s infinite;
}

.text{
    font-size:22px;
    font-weight:600;
    line-height:1.45;
    color:#7a1f47;
    min-height:72px;
}

.cursor{
    margin-left:4px;
    color:#d63384;
    animation:blink 1.2s infinite;
}

.btn{
    margin-top:22px;
    padding:10px 48px;
    font-size:17px;
    background:linear-gradient(180deg,#f7c4de,#f2aecd);
    border:none;
    border-radius:999px;
    cursor:pointer;
    color:#4d0f2d;
}

.hidden{display:none}
@keyframes blink{50%{opacity:0}}
@keyframes beat{30%{transform:scale(1.1)}}

/* ================= LOVE TEXT ================= */
.love-text{
    position:fixed;
    font-size:20px;
    font-weight:900;
    pointer-events:none;
    z-index:4;
    animation:loveFloat 1.5s ease-out forwards;
    text-shadow:
        0 3px 6px rgba(0,0,0,.5),
        0 0 12px rgba(255,105,180,.6);
}

@keyframes loveFloat{
    0%{opacity:0; transform:translateY(0) scale(.8);}
    25%{opacity:1;}
    100%{opacity:0; transform:translateY(-90px) scale(1.15);}
}

.flying-heart{
    position:fixed;
    pointer-events:none;
    z-index:3;
    animation:heartFly 1.6s ease-out forwards;
}

@keyframes heartFly{
    0%{opacity:1; transform:translate(0,0) scale(.8);}
    100%{opacity:0; transform:translate(var(--x),var(--y)) scale(1.6);}
}

</style>
</head>

<body>

<div id="popup1" class="pink-box">
    <div class="heart">ðŸ’—</div>
    <div id="text1" class="text"></div>
    <button class="btn" onclick="nextPopup()">ok</button>
</div>

<div id="popup2" class="pink-box hidden">
    <div class="heart">ðŸ’“</div>
    <div id="text2" class="text"></div>
    <button class="btn" onclick="closePopup()">ok</button>
</div>

<script>
const message1="BÃ© Keii Æ¡ii, bÃ© Keii cÃ³ biáº¿t hÃ´ngg??";
const message2="Em yÃªu chá»‹ nhiá»u láº¯m luÃ´n Ã¡!";

function typeText(id,text,speed=65){
    const el=document.getElementById(id);
    el.innerHTML="";
    let i=0;
    const cursor=document.createElement("span");
    cursor.className="cursor";
    cursor.textContent="â™¥";
    el.appendChild(cursor);
    const t=setInterval(()=>{
        cursor.remove();
        el.textContent+=text[i];
        el.appendChild(cursor);
        i++;
        if(i>=text.length) clearInterval(t);
    },speed);
}

/* ================= LOVE TEXT ================= */
const loveLines=["Em yÃªu Kiá»u","Em nhá»› Kiá»u","hun hun hun","Umoaa umoazz"];

function rand(min,max){return Math.random()*(max-min)+min;}
function randInt(min,max){return Math.floor(rand(min,max));}

function showLove(x,y){
    const div=document.createElement("div");
    div.className="love-text";
    div.textContent=loveLines[randInt(0,loveLines.length)];
    div.style.color=["#ff2e8a","#ff3f95","#ff4d9e","#ff2f6d"][randInt(0,4)];
    div.style.left=x+"px";
    div.style.top=y+"px";
    document.body.appendChild(div);
    setTimeout(()=>div.remove(),1500);

    for(let i=0;i<randInt(2,4);i++){
        const h=document.createElement("div");
        h.className="flying-heart";
        h.textContent="ðŸ’—";
        h.style.fontSize=rand(22,38)+"px";
        h.style.left=x+"px";
        h.style.top=y+"px";
        h.style.setProperty("--x",rand(-120,120)+"px");
        h.style.setProperty("--y",rand(-140,-60)+"px");
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),1600);
    }
}

/* ================= STICKER ================= */
function spawnSticker(src,isPanda){
    const img=new Image();
    img.src=src;
    img.className="sticker";
    if(isPanda) img.classList.add("panda");

    img.onload=()=>{
        const isMobile=window.innerWidth<480;

        if(isPanda){
            img.style.width=isMobile?rand(75,100)+"px":rand(60,75)+"px;
        }else{
            img.style.width=isMobile?rand(65,85)+"px":rand(50,65)+"px;
        }

        let x=rand(0,innerWidth-80);
        let y=rand(0,innerHeight-80);

        img.style.left=x+"px";
        img.style.top=y+"px";

        img.addEventListener("click",(e)=>{
            showLove(e.clientX,e.clientY);
        });

        document.body.appendChild(img);
        setTimeout(()=>img.remove(),3500);
    };
}

function spawnWave(){
    // tÄƒng sá»‘ lÆ°á»£ng cÃ¹ng lÃºc
    for(let i=0;i<randInt(10,14);i++){
        spawnSticker(`stickers/${String(randInt(1,48)).padStart(2,"0")}.png`,false);
    }
    for(let i=0;i<randInt(18,24);i++){
        spawnSticker(`stickers panda/${String(randInt(1,25)).padStart(2,"0")}.png`,true);
    }
}

window.onload=()=>{
    typeText("text1",message1);
    spawnWave();
    setInterval(spawnWave,3500);
};

function nextPopup(){
    popup1.classList.add("hidden");
    popup2.classList.remove("hidden");
    typeText("text2",message2);
}

function closePopup(){
    popup2.classList.add("hidden");
}
</script>

</body>
</html>
