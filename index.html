<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Valentine Night Pink</title>

<style>
body {
    margin: 0;
    min-height: 100vh;

    /* üå∏ D√ôNG CHUNG N·ªÄN MOBILE + DESKTOP */
    background-image: url("valentines-mobile.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-color: #f6d6df;

    display: flex;
    justify-content: center;
    align-items: center;
    font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    overflow: hidden;
}

/* Overlay ƒë√™m */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.25);
    z-index: 0;
}

/* ================= STICKER CHUNG ================= */
.sticker-bg {
    position: fixed;
    z-index: 1;
    pointer-events: none;
    opacity: 0;
    animation: breathe 8s ease-in-out infinite;
    will-change: opacity, transform;
}

/* Panda nh·ªè h∆°n x√≠u cho d·ªãu */
.sticker-panda {
    width: 42px !important;
    opacity: 0;
}

/* ‚ú® xu·∫•t hi·ªán ‚Üí m·ªù ‚Üí hi·ªán l·∫°i */
@keyframes breathe {
    0%   { opacity: 0; }
    25%  { opacity: 0.45; }
    50%  { opacity: 0.15; }
    75%  { opacity: 0.45; }
    100% { opacity: 0; }
}

/* ================= POPUP ================= */
.pink-box {
    position: relative;
    z-index: 2;

    width: min(92vw, 460px);
    padding: 26px 24px 30px;

    background: linear-gradient(180deg,#fff9fc,#fff3f8);
    border-radius: 26px;
    border: 2px solid #f0b7d3;

    box-shadow:
        0 10px 28px rgba(0,0,0,0.25),
        0 0 0 6px rgba(255,255,255,0.4);

    text-align: center;
    animation: fadeZoomIn 0.5s ease;
}

.heart {
    font-size: 46px;
    margin-bottom: 10px;
    animation: heartbeat 2.2s infinite;
}

.text {
    font-size: 22px;
    font-weight: 600;
    line-height: 1.45;
    color: #7a1f47;
    min-height: 72px;
}

.cursor {
    margin-left: 4px;
    color: #d63384;
    font-size: 20px;
    animation: blink 1.2s infinite;
}

.btn {
    margin-top: 22px;
    padding: 10px 48px;
    font-size: 17px;
    background: linear-gradient(180deg,#f7c4de,#f2aecd);
    border: none;
    border-radius: 999px;
    cursor: pointer;
    color: #4d0f2d;
}

.hidden { display: none; }

/* Anim */
@keyframes blink { 50% { opacity: 0; } }
@keyframes heartbeat { 30% { transform: scale(1.1); } }
@keyframes fadeZoomIn {
    from { opacity:0; transform:scale(0.9); }
    to { opacity:1; transform:scale(1); }
}

/* Mobile tinh ch·ªânh */
@media (max-width:480px) {
    .text { font-size: 20px; }
}
</style>
</head>

<body>

<!-- POPUP 1 -->
<div id="popup1" class="pink-box">
    <div class="heart">üíó</div>
    <div id="text1" class="text"></div>
    <button class="btn" onclick="nextPopup()">ok</button>
</div>

<!-- POPUP 2 -->
<div id="popup2" class="pink-box hidden">
    <div class="heart">üíì</div>
    <div id="text2" class="text"></div>
    <button class="btn" onclick="closePopup()">ok</button>
</div>

<script>
/* ================= TEXT ================= */
const message1 = "B√© Keii ∆°ii, b√© Keii c√≥ bi·∫øt h√¥ngg??";
const message2 = "Em y√™u ch·ªã nhi·ªÅu l·∫Øm lu√¥n √°!";

function typeText(id, text, speed = 65) {
    const el = document.getElementById(id);
    el.innerHTML = "";
    let i = 0;

    const cursor = document.createElement("span");
    cursor.className = "cursor";
    cursor.textContent = "‚ô•";
    el.appendChild(cursor);

    const timer = setInterval(() => {
        cursor.remove();
        el.textContent += text[i];
        el.appendChild(cursor);
        i++;
        if (i >= text.length) clearInterval(timer);
    }, speed);
}

/* ================= STICKER ENGINE ================= */
function rand(min,max){ return Math.random()*(max-min)+min; }

function renderStickerSet(folder, total, cols, rows, extraClass="") {
    let i = 1;
    for(let r=0;r<rows;r++){
        for(let c=0;c<cols;c++){
            if(i > total) return;

            const img = new Image();
            img.src = `${folder}/${String(i).padStart(2,"0")}.png`;
            img.className = `sticker-bg ${extraClass}`;

            img.onload = () => {
                const cw = innerWidth / cols;
                const ch = innerHeight / rows;

                img.style.width = rand(46,78)+"px";
                img.style.left = c*cw + rand(12,cw-90)+"px";
                img.style.top = r*ch + rand(12,ch-90)+"px";
                img.style.animationDelay = rand(0,1.4)+"s";

                document.body.appendChild(img);
            };
            i++;
        }
    }
}

/* ================= FLOW ================= */
window.onload = () => {
    /* Sticker g·ªëc */
    renderStickerSet("stickers", 47, 8, 7);

    /* Sticker panda ‚Äì √≠t h∆°n, nh·∫π h∆°n */
    renderStickerSet("stickers panda", 24, 6, 4, "sticker-panda");

    typeText("text1", message1);
};

function nextPopup(){
    popup1.classList.add("hidden");
    popup2.classList.remove("hidden");
    typeText("text2", message2);
}

function closePopup(){
    popup2.classList.add("hidden");
}
</script>

</body>
</html>
