<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Valentine Night Pink</title>

<style>
body {
    margin: 0;
    min-height: 100vh;
    background-image: url("background.png");
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    background-color: #f6d6df;

    display: flex;
    justify-content: center;
    align-items: center;
    font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
    overflow: hidden;
}

/* Overlay ƒë√™m */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.25);
    z-index: 0;
}

/* ================= STICKER ================= */
.sticker-bg {
    position: fixed;
    z-index: 1;
    pointer-events: none;

    opacity: 0;
    animation: breathe 8s ease-in-out infinite;
    will-change: opacity;
}

/* ‚ú® Xu·∫•t hi·ªán ‚Üí m·ªù ‚Üí hi·ªán l·∫°i */
@keyframes breathe {
    0%   { opacity: 0; }
    25%  { opacity: 0.45; } /* ~2s */
    50%  { opacity: 0.15; }
    75%  { opacity: 0.45; }
    100% { opacity: 0; }
}

/* ================= POPUP ================= */
.pink-box {
    position: relative;
    z-index: 2;
    width: 420px;
    height: 260px;
    background: #fff7fb;
    border-radius: 22px;
    border: 3px solid #e5a3c2;
    box-shadow:
        0 0 0 6px rgba(255,255,255,0.35),
        0 28px 60px rgba(0,0,0,0.45);
    text-align: center;
    animation: fadeZoomIn 0.5s ease;
}

.heart {
    font-size: 48px;
    margin-top: 28px;
    animation: heartbeat 2.2s infinite;
}

.text {
    font-size: 24px;
    font-weight: 600;
    margin-top: 18px;
    min-height: 60px;
    color: #7a1f47;
}

.cursor {
    margin-left: 4px;
    color: #d63384;
    font-size: 22px;
    animation: blink 1.2s infinite;
}

.btn {
    margin-top: 30px;
    padding: 10px 45px;
    font-size: 18px;
    background: #f2b6d8;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    color: #4d0f2d;
}

.hidden { display: none; }

/* Anim popup */
@keyframes blink { 50% { opacity: 0; } }
@keyframes heartbeat { 30% { transform: scale(1.1); } }
@keyframes fadeZoomIn {
    from { opacity:0; transform:scale(0.88); }
    to { opacity:1; transform:scale(1); }
}

/* Mobile */
@media (max-width:480px) {
    .pink-box {
        width: 90%;
        height: auto;
        padding-bottom: 20px;
    }
}
</style>
</head>

<body>

<!-- POPUP 1 -->
<div id="popup1" class="pink-box">
    <div class="heart">üíó</div>
    <div id="text1" class="text"></div>
    <button class="btn" onclick="nextPopup()">ok</button>
</div>

<!-- POPUP 2 -->
<div id="popup2" class="pink-box hidden">
    <div class="heart">üíì</div>
    <div id="text2" class="text"></div>
    <button class="btn" onclick="closePopup()">ok</button>
</div>

<script>
/* ================= TEXT ================= */
const message1 = "B√© Keii ∆°ii, b√© Keii c√≥ bi·∫øt h√¥ngg??";
const message2 = "Em y√™u ch·ªã nhi·ªÅu l·∫Øm lu√¥n √°!";

function typeText(id, text, speed = 70) {
    const el = document.getElementById(id);
    el.innerHTML = "";
    let i = 0;

    const cursor = document.createElement("span");
    cursor.className = "cursor";
    cursor.textContent = "‚ô•";
    el.appendChild(cursor);

    const timer = setInterval(() => {
        cursor.remove();
        el.textContent += text[i];
        el.appendChild(cursor);
        i++;
        if (i >= text.length) clearInterval(timer);
    }, speed);
}

/* ================= STICKER ================= */
const TOTAL = 47;
const COLS = 8;
const ROWS = 7;

function rand(min,max){ return Math.random()*(max-min)+min; }

function renderStickers() {
    let i = 1;
    for(let r=0;r<ROWS;r++){
        for(let c=0;c<COLS;c++){
            if(i > TOTAL) return;

            const img = new Image();
            img.src = `stickers/${String(i).padStart(2,"0")}.png`;
            img.className = "sticker-bg";

            img.onload = () => {
                const cw = innerWidth / COLS;
                const ch = innerHeight / ROWS;

                img.style.width = rand(50,80)+"px";
                img.style.left = c*cw + rand(10,cw-80)+"px";
                img.style.top = r*ch + rand(10,ch-80)+"px";

                /* l·ªách pha nh·∫π cho t·ª± nhi√™n */
                img.style.animationDelay = rand(0,1.2)+"s";
                document.body.appendChild(img);
            };
            i++;
        }
    }
}

/* ================= FLOW ================= */
window.onload = () => {
    renderStickers();
    typeText("text1", message1);
};

function nextPopup(){
    popup1.classList.add("hidden");
    popup2.classList.remove("hidden");
    typeText("text2", message2);
}

function closePopup(){
    popup2.classList.add("hidden");
}
</script>

</body>
</html>

